(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{334:function(e,t,a){e.exports=a.p+"assets/img/teaclave-trustzone-sdk-macros.54db69cf.png"},335:function(e,t,a){e.exports=a.p+"assets/img/teaclave-trustzone-sdk-apis.c71c04ed.png"},358:function(e,t,a){e.exports=a.p+"assets/img/teaclave-trustzone-sdk-design.fab30880.png"},359:function(e,t,a){e.exports=a.p+"assets/img/teaclave-trustzone-sdk-paper.387eb78f.png"},360:function(e,t,a){e.exports=a.p+"assets/img/teaclave-trustzone-sdk-timeline.b003b342.png"},361:function(e,t,a){e.exports=a.p+"assets/img/teaclave-ecosystem-cn.4074b3b4.png"},545:function(e,t,a){"use strict";a.r(t);var r=a(29),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[r("a",{attrs:{href:"/blog/2021-03-14-welcome-rust-optee-trustzone-sdk"}},[e._v("English")]),e._v(" | "),r("a",{attrs:{href:"/blog/2021-03-14-welcome-rust-optee-trustzone-sdk-cn"}},[e._v("中文")])]),e._v(" "),r("p",[e._v("TrustZone 为手机、嵌入式设备、云计算等 ARM 生态提供安全的可信执行环境，用于包括\n安全支付、密钥管理、模型保护等场景。但是由于内存安全问题，TrustZone 中运行的安全\n应用 (trusted application 或叫 TA) 的安全性大打折扣。\n例如"),r("a",{attrs:{href:"http://bits-please.blogspot.com/2016/05/qsee-privilege-escalation-vulnerability.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("高通 QSEE 内存安全问题")]),e._v("\n[1] 造成的安全世界（secure world) 的漏洞，\n后果甚至可以"),r("a",{attrs:{href:"http://bits-please.blogspot.com/2016/06/extracting-qualcomms-keymaster-keys.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("拿到全磁盘加密的密钥")]),e._v(" [2]。")]),e._v(" "),r("p",[e._v("2019 年初百度开源了 Rust OP-TEE TrustZone SDK，为当今广泛使用的开源 TrustZone 实\n现 OP-TEE 提供了一套"),r("strong",[e._v("内存安全")]),e._v("、"),r("strong",[e._v("使用方便")]),e._v("的 SDK。SDK 基于 GlobalPlatform 的\nTEE 标准，为开发者提供标准的开发接口。除此之外 Rust OP-TEE TrustZone SDK "),r("strong",[e._v("支持\n标准库")]),e._v("和"),r("strong",[e._v("第三方库")]),e._v("，提高了 TA 的开发速度，并扩展了 TrustZone 的应用场景。")]),e._v(" "),r("p",[e._v("为了加速隐私安全生态发展，完善 TrustZone 的技术基础设施，百度在 2021 年初正式把\n项目捐赠给 Apache 基金会，作为 Teaclave 的子项目之一，同时更名为 Teaclave\nTrustZone SDK，新的项目代码库地址为：\n"),r("a",{attrs:{href:"https://github.com/apache/incubator-teaclave-trustzone-sdk",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/apache/incubator-teaclave-trustzone-sdk")]),e._v("\n。Teaclave TrustZone SDK 与 Teaclave SGX SDK 一样，可以为 Teaclave FaaS 隐私安全\n计算平台提供底层支持，赋能多平台可信执行环境的隐私安全计算生态。")]),e._v(" "),r("h2",{attrs:{id:"teaclave-trustzone-sdk-设计和实现"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#teaclave-trustzone-sdk-设计和实现"}},[e._v("#")]),e._v(" Teaclave TrustZone SDK 设计和实现")]),e._v(" "),r("p",[e._v("Teaclave TrustZone SDK 在 GlobalPlatform 标准的 API 上重新设计了安全的 Rust 接口，\n使用 Rust 编写 TA（图中的 trusted apps）和 app（图中 client apps）能够大大减少内\n存安全问题，确保可信执行环境的安全。")]),e._v(" "),r("p",[r("img",{attrs:{src:a(358),alt:"Teaclave TrustZone SDK Design"}})]),e._v(" "),r("p",[e._v("通过使用 Rust 的过程宏（procedure macro）自动生成边界代码，减少了开发中不必要的\n负担，并且能够避免开发中因为粗心造成的安全问题。如下图所示，只需要在相应的函数上\n加 "),r("code",[e._v("#[ta_create]")]),e._v(", "),r("code",[e._v("#[ta_open_session]")]),e._v(", "),r("code",[e._v("#[ta_close_session]")]),e._v(", "),r("code",[e._v("#[ta_destory]")]),e._v(",\n"),r("code",[e._v("#[ta_invoke_command]")]),e._v("。")]),e._v(" "),r("p",[r("img",{attrs:{src:a(334),alt:"Teaclave TrustZone SDK Macros"}})]),e._v(" "),r("p",[e._v("通过利用 Rust 的丰富的类型系统，能在编译时报告内存安全问题，例如下图中对于\nclient 的实现，相比复杂并且类型简单的 C 接口，Rust API 语义更清晰，并提供强类型\n检查。")]),e._v(" "),r("p",[r("img",{attrs:{src:a(335),alt:"Teaclave TrustZone SDK APIs"}})]),e._v(" "),r("p",[e._v("项目中提供了 13 个样例程序，包括加解密，安全存储，HOTP 等等。同时，我们还展示了\n使用 Rust 的第三方库 serde 作为边界的序列化来传递复杂参数，避免出现安全边界设计\n不当引发的内存安全问题。")]),e._v(" "),r("h2",{attrs:{id:"快速上手、文档"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#快速上手、文档"}},[e._v("#")]),e._v(" 快速上手、文档")]),e._v(" "),r("p",[e._v("Teaclave TrustZone SDK 的 API 都提供了对应的文档，在项目 Wiki 中，我们提供了一个\n快速上手的例子，在 QEMU 模拟器中运行使用 TrustZone SDK 的 trusted app。链接如下：\n"),r("a",{attrs:{href:"https://github.com/apache/incubator-teaclave-trustzone-sdk/wiki/Getting-started-with-OPTEE-for-QEMU-ARMv8",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/apache/incubator-teaclave-trustzone-sdk/wiki/Getting-started-with-OPTEE-for-QEMU-ARMv8")]),e._v("\n。更多关于 Teaclave TrustZone SDK 的设计和性能等都在论文 RusTEE: Developing\nMemory-Safe ARM TrustZone Applications 中找到，此论文也收录于 ACSAC 2020。")]),e._v(" "),r("p",[r("img",{attrs:{src:a(359),alt:"Teaclave TrustZone Paper"}})]),e._v(" "),r("h2",{attrs:{id:"teaclave-trustzone-sdk-时间线"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#teaclave-trustzone-sdk-时间线"}},[e._v("#")]),e._v(" Teaclave TrustZone SDK 时间线")]),e._v(" "),r("ul",[r("li",[e._v("2019 年初开源。")]),e._v(" "),r("li",[e._v("2019 年在 Linaro Connect 和 RustCon Asia 对外发布，得到了 ARM 的支持，现在其隐私计算相关项目中使用。")]),e._v(" "),r("li",[e._v("2020 年相关文章发表在国际顶级安全会议 ACSAC，得到学术界肯定。")]),e._v(" "),r("li",[e._v("随着隐私安全计算的发展，多个开源项目开始使用，例如由 ARM Research 主导的 Veracruz 开源项目使用 SDK 构建其隐私计算试验项目，Veracurz 也将加入隐私计算联盟（Confidential Computing Consortium）。")]),e._v(" "),r("li",[e._v("2021 年 2 月升级 TrustZone SDK 支持 OP-TEE 3.11 和 3.12。")]),e._v(" "),r("li",[e._v("2021 年 2 月启动项目捐赠流程，通过社区投票并提交 Software Grant Agreement。")]),e._v(" "),r("li",[e._v("2021 年 3 月项目 repository 正式移交到 Apache 组织下，隶属于 Apache Teaclave (incubating) 项目。")])]),e._v(" "),r("p",[r("img",{attrs:{src:a(360),alt:"Teacalve TrustZone SDK Timeline"}})]),e._v(" "),r("h2",{attrs:{id:"teaclave-开源社区"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#teaclave-开源社区"}},[e._v("#")]),e._v(" Teaclave 开源社区")]),e._v(" "),r("p",[e._v("TrustZone SDK 加入 Apache 后，将与 Teaclave 开源社区共同发展，非常欢迎大家的贡献，\n一起推动隐私安全计算生态 。已有至少四家公司或组织在产品中使用 Teaclave，并且有超\n过九个开源项目使用了 Teaclave 平台和 Teaclave SGX SDK。这些都给项目的发展提供源\n源不断的动力。更多信息可以在我们的官网 community 下查看：\n"),r("a",{attrs:{href:"https://teaclave.apache.org/community/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://teaclave.apache.org/community/")])]),e._v(" "),r("p",[r("img",{attrs:{src:a(361),alt:"Teaclave Commmunity"}})]),e._v(" "),r("p",[e._v("Teaclave 的开源是 "),r("a",{attrs:{href:"https://www.apache.org/theapacheway/",target:"_blank",rel:"noopener noreferrer"}},[e._v("The Apache Way")]),e._v("\n("),r("a",{attrs:{href:"https://www.apache.org/theapacheway/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.apache.org/theapacheway/")]),e._v(")\n的开源，无论是代码、文档、设计还是路线图规划，我们都会在社区的各个渠道中讨论。如\n果 你想关注 Teaclave，亦或想加入我们的讨论，可以在 "),r("a",{attrs:{href:"https://lists.apache.org/list.html?dev@teaclave.apache.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github issues")]),e._v("，邮件列 表\n回复我们、发起新的话题。也可以关注我们的 Twitter 账号\n"),r("a",{attrs:{href:"https://twitter.com/ApacheTeaclave",target:"_blank",rel:"noopener noreferrer"}},[e._v("@ApacheTeaclave")]),e._v("了解最新动态。除此之外，\n我们在"),r("a",{attrs:{href:"https://teaclave.apache.org/docs/papers-talks/",target:"_blank",rel:"noopener noreferrer"}},[e._v("官网")]),e._v("\n("),r("a",{attrs:{href:"https://teaclave.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://teaclave.apache.org/")]),e._v(")中提供了\nTeaclave 相关的演讲、论文和文章，包括 TrustZone SDK 之前的演讲 slides 以及视频。")]),e._v(" "),r("p",[e._v("参考链接：")]),e._v(" "),r("p",[e._v("[1] Qualcomm's Secure Execution Environment (QSEE) privilege escalation\nvulnerability and exploit (CVE-2015-6639) :\n"),r("a",{attrs:{href:"http://bits-please.blogspot.com/2016/05/qsee-privilege-escalation-vulnerability.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://bits-please.blogspot.com/2016/05/qsee-privilege-escalation-vulnerability.html")])]),e._v(" "),r("p",[e._v("[2] Extracting Qualcomm's KeyMaster Keys - Breaking Android Full Disk\nEncryption:\n"),r("a",{attrs:{href:"http://bits-please.blogspot.com/2016/06/extracting-qualcomms-keymaster-keys.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://bits-please.blogspot.com/2016/06/extracting-qualcomms-keymaster-keys.html")])])])}),[],!1,null,null,null);t.default=s.exports}}]);